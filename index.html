<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Crypto-données</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #0d1b2a; /* bleu sombre */
      color: #ffffff;
    }
    .container {
      display: flex;
      justify-content: space-between;
      max-width: 900px;
      margin: auto;
    }
    .chart-box {
      width: 45%;
      text-align: center;
    }
    .chart-title {
      font-weight: bold;
      margin-bottom: 8px;
      font-size: 18px;
      color: #ffffff;
    }
    iframe {
      border: none;
      width: 100%;
      height: 300px;
    }
    h1 {
      text-align: center;
      color: #ffffff;
    }
  </style>
</head>
<body>
  <h1>Crypto-données</h1>
  <div class="container">
    <div class="chart-box">
      <div class="chart-title">BTCUSD</div>
      <iframe src="https://s.tradingview.com/widgetembed/?symbol=BINANCE:BTCUSDT&interval=60&theme=dark&style=1&locale=fr"
        scrolling="no"></iframe>
    </div>
    <div class="chart-box">
      <div class="chart-title">ETHUSD</div>
      <iframe src="https://s.tradingview.com/widgetembed/?symbol=BINANCE:ETHUSDT&interval=60&theme=dark&style=1&locale=fr"
        scrolling="no"></iframe>
    </div>
  </div>
</body>
</html>




from flask import Flask, jsonify
import requests

app = Flask(__name__)

def get_spot_price():
    url = "https://www.deribit.com/api/v2/public/ticker?instrument_name=ETH-PERPETUAL"
    response = requests.get(url).json()
    return response['result']['last_price']

def get_options(instrument_name_prefix):
    url = "https://www.deribit.com/api/v2/public/get_instruments?currency=ETH&kind=option&expired=false"
    response = requests.get(url).json()
    instruments = response['result']
    options = [i for i in instruments if i['instrument_name'].startswith(instrument_name_prefix)]
    return options

def categorize_options(options, spot_price, atm_threshold=0.01):
    count_atm = 0
    count_itm = 0
    count_otm = 0
    for opt in options:
        strike = opt['strike']
        option_type = 'call' if opt['option_type'] == 'call' else 'put'
        if abs(strike - spot_price)/spot_price <= atm_threshold:
            count_atm += 1
        else:
            if option_type == 'call':
                if strike < spot_price:
                    count_itm += 1
                else:
                    count_otm += 1
            elif option_type == 'put':
                if strike > spot_price:
                    count_itm += 1
                else:
                    count_otm += 1
    total = len(options)
    if total == 0:
        return 0,0,0
    return (count_atm / total) * 100, (count_itm / total) * 100, (count_otm / total) * 100

@app.route('/api/eth-options')
def eth_options():
    spot = get_spot_price()
    instrument_prefix = "ETH-9JUN25"
    options = get_options(instrument_prefix)
    atm, itm, otm = categorize_options(options, spot)
    return jsonify({
        "spot_price": spot,
        "atm_pct": round(atm,2),
        "itm_pct": round(itm,2),
        "otm_pct": round(otm,2)
    })

if __name__ == "__main__":
    app.run(debug=True)

<div id="eth-options" style="max-width: 900px; margin: 20px auto; color: #fff; font-size: 18px; text-align:center;">
  Chargement des données options ETH...
</div>

<script>
  async function fetchOptionsData() {
    try {
      const res = await fetch('http://localhost:5000/api/eth-options');
      const data = await res.json();
      document.getElementById('eth-options').innerHTML = `
        <strong>ETH Options</strong><br>
        Spot Price: $${data.spot_price} <br>
        ATM: ${data.atm_pct}% &nbsp;&nbsp;
        ITM: ${data.itm_pct}% &nbsp;&nbsp;
        OTM: ${data.otm_pct}%
      `;
    } catch (e) {
      document.getElementById('eth-options').innerHTML = 'Erreur lors du chargement des données options.';
      console.error(e);
    }
  }

  fetchOptionsData();
</script>


                  



